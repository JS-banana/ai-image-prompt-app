# 站点重新编排与工作台整合方案（首页主画板 + /generate 高级台）

日期：2026-01-04

## 背景与目标

- 基于“温室工作台”新首页风格，将生图主流程前移到首页。
- 大部分用户在首页完成生成；/generate 保留完整功能并进行同风格的美术升级。
- 首页保持“轻量、不拉长”的体验，历史与提示词仅轻量呈现。

## 关键决策

- 首页画板覆盖核心功能：提示词、模型、分辨率、生成、预览、历史；API Key/上传图作为折叠入口或引导。
- 首页信息结构采用“画板后分区叠放”的轻量快照：
  - 最近生成：横向 4–6 张条带，控制高度
  - 提示词精选：2–3 条卡片，1 行摘要
- /generate 作为“高级工作台”：完整功能 + 高密度设置 + 管理入口。

## 信息架构与版式

### 首页（/）

1. 顶部极简导航 + 主视觉品牌文案
2. 画布级工作台（可完整生成）
3. 最近生成（横向条带，短列表）
4. 提示词精选（短列表）
5. 轻量页脚

### /generate（高级工作台）

- 左侧：工作台（完整输入/配置/上传/API Key）
- 右侧：预览 + 历史 + 导出/清空
- 整体风格对齐首页（温室工作台：材质、渐变、克制高端感）

## 组件拆分与复用

- `WorkbenchCore`（核心能力）
  - 提示词输入、模型选择、分辨率选择、生成动作、错误提示、结果回传
- `HomeWorkbenchShell`（首页壳）
  - 折叠/引导式 API Key、上传图
- `GenerateWorkbenchShell`（/generate 壳）
  - 完整功能、历史管理与导出入口
- `HomeRecentStrip`
  - 横向 4–6 条最近生成，限制高度
- `HomePromptHighlights`
  - 2–3 条提示词卡片，摘要 + CTA

## 交互与内容策略

- 首页画板：默认聚焦提示词与生成按钮，减少初次认知负担
- API Key 缺失：画板内提示 + “打开设置 / 去高级模式”入口
- 上传图：轻量提示 + 折叠入口（避免占用空间）
- 最近生成：悬停轻抬升与色彩微增强，点击进入画廊或直接回填
- 提示词精选：快速填充到画板，入口跳转至提示词库

## 数据流与错误处理

- 页面数据：`getPromptOptions()`、`getModelConfigs()` 由 Server 端拉取并传给核心组件
- 生成逻辑：复用 `/api/generate` + `useImageGeneration`
- 历史：复用 `useSeedreamHistory`；首页“最近生成”同时展示 DB 快照（`getGenerationGalleryPage`）
- 错误：沿用轻量提示条；避免全屏弹层

## 响应式与体验

- 首页：画板全宽堆叠，近期生成/提示词精选改为横向滑动
- /generate：移动端上下堆叠，预览与历史置于下方
- 控制页面长度：默认不展开大量列表

## 测试策略

- Home: 新增“画板可用、最近生成与提示词精选存在性”测试
- /generate: 保留现有核心逻辑测试；若抽出核心组件，新增交互单测

## 风格一致性

- 继续使用“温室工作台”风格：象牙白基底 + 苔绿/琥珀/矿物蓝点缀
- 轻纸纹 + 低对比渐变光斑
- 字体延续 Noto Serif SC / Noto Sans SC，轻量但高级
